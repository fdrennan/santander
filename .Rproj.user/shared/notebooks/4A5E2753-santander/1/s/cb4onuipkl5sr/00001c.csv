"0","preds = map2("
"0","  res,"
"0","  models,"
"0","  function(x, y) {"
"0","    test = y$test"
"0","    "
"0","    if(""xgb.Booster""  == class(x)) {"
"0","      "
"0","      "
"0","      test = mutate(test, target = as.integer(target))"
"0","      target = Matrix::as.matrix(select(test, target)) - 1"
"0","      test = Matrix::as.matrix(select(test,-target))"
"0","      test <- xgb.DMatrix(data = test, label = target)"
"0","      data = predict(x, test)"
"0","      preds = as.numeric(data > .5)"
"0","  "
"0","    } else {"
"0","      preds = unlist(predict(x, test))"
"0","    }"
"0","    "
"0","    tibble(prediction = preds,"
"0","           actual     = y$test$target)"
"0","  }"
"0",")"
